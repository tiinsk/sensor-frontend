import React from 'react';
import { colorGradient } from '../../../../utils/humidity-colors';

export const additionalDefs = [
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-1"
    key="large-drop-gradient-1"
  >
    <stop stopColor="#EDC9D1" offset="0%" />
    <stop stopColor="#CE96A3" offset="54.7518362%" />
    <stop stopColor="#E68A6F" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-2"
    key="large-drop-gradient-2"
  >
    <stop stopColor="#F3D2D7" offset="0%" />
    <stop stopColor="#D5A5AD" offset="54.7518362%" />
    <stop stopColor="#DDB7B9" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-3"
    key="large-drop-gradient-3"
  >
    <stop stopColor="#ECD5D6" offset="0%" />
    <stop stopColor="#DDB6B9" offset="54.7518362%" />
    <stop stopColor="#A4B9D5" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-4"
    key="large-drop-gradient-4"
  >
    <stop stopColor="#E0E2EC" offset="0%" />
    <stop stopColor="#B6B9CD" offset="54.7518362%" />
    <stop stopColor="#9DBAD9" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-5"
    key="large-drop-gradient-5"
  >
    <stop stopColor="#F1F9FF" offset="0%" />
    <stop stopColor="#86BAE3" offset="54.7518362%" />
    <stop stopColor="#6AA9E6" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-6"
    key="large-drop-gradient-6"
  >
    <stop stopColor="#E5F2FF" offset="0%" />
    <stop stopColor="#6AAAE6" offset="54.7518362%" />
    <stop stopColor="#578ADC" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="large-drop-gradient-7"
    key="large-drop-gradient-7"
  >
    <stop stopColor="#DEEBFF" offset="0%" />
    <stop stopColor="#588DDC" offset="54.7518362%" />
    <stop stopColor="#28569D" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-1"
    key="small-drop-gradient-1"
  >
    <stop stopColor="#EDC9D1" offset="0%" />
    <stop stopColor="#E68A6F" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-2"
    key="small-drop-gradient-2"
  >
    <stop stopColor="#F3D2D7" offset="0%" />
    <stop stopColor="#DDB7B9" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-3"
    key="small-drop-gradient-3"
  >
    <stop stopColor="#ECD5D6" offset="0%" />
    <stop stopColor="#A4B9D5" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-4"
    key="small-drop-gradient-4"
  >
    <stop stopColor="#E0E2EC" offset="0%" />
    <stop stopColor="#9DBAD9" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-5"
    key="small-drop-gradient-5"
  >
    <stop stopColor="#F1F9FF" offset="0%" />
    <stop stopColor="#6AA9E6" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-6"
    key="small-drop-gradient-6"
  >
    <stop stopColor="#E5F2FF" offset="0%" />
    <stop stopColor="#578ADC" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="28.5669501%"
    y1="3.31680676%"
    x2="91.8046749%"
    y2="100%"
    id="small-drop-gradient-7"
    key="small-drop-gradient-7"
  >
    <stop stopColor="#DEEBFF" offset="0%" />
    <stop stopColor="#28569D" offset="100%" />
  </linearGradient>,
  <linearGradient
    x1="50%"
    y1="112.83976%"
    x2="50%"
    y2="0%"
    id="humidity-line-gradient"
    key="line-gradient"
  >
    <stop stopColor="#CD94A1" offset="0%" />
    <stop stopColor="#DEB9BB" offset="35.2189825%" />
    <stop stopColor="#74BAEC" offset="73.7190564%" />
    <stop stopColor="#5588DB" offset="100%" />
  </linearGradient>,
];

export const customPointMark =
  dataPointCount =>
  ({ d, xy, yScale }) => {
    const minutes = new Date(d.rounded_time).getMinutes();

    const largeOffset = 11;
    const smallOffset = 6;

    const yLarge = yScale(0) - yScale(xy.yBottom) - largeOffset;
    const ySmall = yScale(0) - yScale(xy.yBottom) - smallOffset;

    //hide first and last point
    if (d.index === 0) return <g />;

    if (minutes) {
      return (
        <g className="half-hour-mark">
          <rect
            fill="#3C4861"
            opacity={0.6}
            width={3}
            height={ySmall >= 0 ? ySmall : 0}
            x={-1}
            y={smallOffset}
          />
          <path
            transform="translate(-3, 0)"
            fill={`url(#small-drop-gradient-${colorGradient(d.humidity)})`}
            d="M4,8.56292657 C6.209139,8.56292657 8,6.77206557 8,4.56292657 C8,3.09016723 6.66666667,1.56919171 4,0 C1.33333333,1.56919171 0,3.09016723 0,4.56292657 C0,6.77206557 1.790861,8.56292657 4,8.56292657 Z"
          />
        </g>
      );
    }

    return (
      <g>
        <text className="unit-text" x={-10} y={-10}>
          {d.humidity.toFixed(1)}
        </text>
        <rect
          fill="#3C4861"
          width={3}
          height={yLarge >= 0 ? yLarge : 0}
          x={-1}
          y={largeOffset}
        />
        <path
          transform="translate(-6, 0)"
          fill={`url(#large-drop-gradient-${colorGradient(d.humidity)})`}
          d="M6.5,19.733796 C10.0898509,19.733796 13,16.8236468 13,13.233796 C13,10.840562 10.8333333,6.42929672 6.5,0 C2.16666667,6.42929672 0,10.840562 0,13.233796 C0,16.8236468 2.91014913,19.733796 6.5,19.733796 Z"
        />
      </g>
    );
  };
